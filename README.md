# Лэндинг для инвесторов Platiza

## Переменные для задания параметров инвестирования - срок, сумма, проценты

- **app/config/config.php** - задаются переменные, которые используются в процессе разработки

- **dist/config/config.php** - компиллируется из /app при сборке

- **config/config.php** - На сервере используется свой файл, в котором задаются параметры отправки формы на почту для PHPMailer


## Требования к рабочей среде

- **Nodejs + npm** - установленный глобально [https://nodejs.org/en/](https://nodejs.org/en/)
    - node 0.12.x
    - node 6.x
    - npm 3.x.x

- **bower** - пакетный менеджер для фронтенда, установленный глобально [http://bower.io/](http://bower.io/):
```bash
$ npm install bower --global
```

- **Gulp** - инструмент для потоковой обработки файлов, установленный глобально [http://gulpjs.com/](http://gulpjs.com/):
```bash
$ npm install gulp --global
```

- **Ruby** - установленный глобально [http://rubyinstaller.org/](http://rubyinstaller.org/).
Для компилляции scss.

- **Browserify** - установленный глобально.
Позволяет использовать node-style require() для работы с js в браузере.
```bash
$ npm install browserify --global
```


## Установка модулей в проект

- Установка необходимых **npm-модулей** в проект
  (Список модулей - **package.json** в корне сайта. Модули устанавливаются в папку **node_modules/**)

В папке проекта:
```bash
$ npm install
```

- Установка необходимых **фронтенд-компонентов** и соответствующих зависимостей
 (Список модулей - **bower.json** в корне сайта. Модули устанавливаются в папку **bower_components/**)

В папке проекта:
```bash
$ bower install
```


## Настройка хоста проекта

- В файле **gulp-vars.js** в корне сайта задать переменную **hostnameTest** - адрес локальной рабочей копии проекта

При разработке - запустится дев-сервер по указанному адресу


## Структура папок проекта

- **bower_components/** - вендорные js-библиотеки и css-компоненты, устанавливаемые через пакетный менеджер bower ($ bower install). **В репозитории не хранится**

- **node_modules/** - модули для nodejs, используемые для работы с проектом ($ npm install). **В репозитории не хранится**

- **/app** - Исходники, папка для разработки

- **/dist** - Папка для продакшена

- **.babelrc** - настройки для [babel.js](https://babeljs.io/) - библиотека для компилляции js, написанного по новому стандарту [ES-2015](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

- **.bowerrc** - путь до папки с компонентами bower

- **bower.json** - файл зависимостей компонентов bower. В проект устанавливаются все библиотеки, указанные в этом файле. Также для каждого устанавливаемого компонента дополнительно устанавливаются все компоненты, которые требуются для его работы.

- **gulpfile.babel.js** - файл с подключением задач для потоковой обработки файлов с помощью gulp-плагинов

- **gulp-vars.js** - файл с конфигурацией проекта для задач gulp

- **gulp-tasks/** - папка с задачами для потоковой обработки файлов с помощью gulp-плагинов

- **package.json** - файл зависимостей npm-модулей. В проект устанавливаются все модули, указанные в этом файле. Также в этом файле прописаны npm-скрипты для запуска задач.

- **lint.yml** - конфиг для линтера scss

  - Формат именования классов css (БЭМ-синтаксис) - "**block-name**", "**block-name\_\_element-name**", "**block-name\_mod-name**", "**block-name\_\_element-name\_mod-name**"


## Архитектура scss

Для организации файлов scss используется **7-1 pattern** <a href="http://sass-guidelin.es/#architecture" target="_blank">http://sass-guidelin.es/#architecture</a>
<br />
- **base/** - Базовые стили
- **blocks/** - Стили блоков (компонентов)
- **layout/** - Стили каркаса страницы
- **pages/** - Стили отдельных страниц. В проекте не планируются
- **themes/** - Стили тем (например, новогодняя и т.п.)
- **utility/** - Служебные файлы для scss - переменные, миксины, функции и т.п. Также необходимые переменные и миксины для вендоров (jquery-ui, bootstrap)
- **vendors/** - Вендорные стили. В проекте этой папки нет, т.к. все нужные вендорные стили тянутся из bower_compoments/ и при билде конкатенируются в один минифицированный файл dist/css/vendors.min.css


## Архитектура js

- Исходные js-скрипты лежат в папке **app/scripts/**
- Все скрипты должны быть написаны в виде модулей CommonJS.
- Для бандла скриптов в проекте используется <a href="http://browserify.org/" target="_blank">browserify</a>


## Процесс разработки

В папке проекта:
```bash
$ npm run dev
```
Либо:
```bash
$ gulp serve
```
**_В PhpStorm есть вкладка Gulp [https://gyazo.com/25dbce6b3e2333c7c1af7a52083d4995](https://gyazo.com/25dbce6b3e2333c7c1af7a52083d4995) - можно запускать задачи оттуда_**

- Компиллирует css из scss. Основной scss-файл = app/scss/main.scss
- Складывает файлы стилей в папку **app/css**

- Компиллирует js из js-модулей. Основной js-файл = app/scripts/index.js
- Складывает файлы стилей в папку **app/js**

- Запускает локальный сервер, **hostnameTest** _(см. gulp-vars.js)_

- Отслеживает изменения в файлах php, scss, js, images, fonts из папки **sourcePath = "app"** _(см. gulp-vars.js)_ - компиллирует css и js, автоматически перезагружает браузер

- Сайт будет доступен на любом устройстве в пределах сети (в том числе мобильные девайсы)


## Сборка проекта

```bash
$ npm run build
```
Либо:
```bash
$ gulp build
```
- Компилляция css из sass

- Компилляция js из js-модулей (browserify)

- Минификация файлов - вендорные css (bower_components), вендорные js (bower_components), php

- Обработка (минификация) images

- Копирование всех необходимых файлов в папку билда **currentPath = "dist"** _(см. gulp-vars.js)_
